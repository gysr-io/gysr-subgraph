type Token @entity {
  # token contract address
  id: ID!

  # token info
  symbol: String!
  name: String!
  decimals: BigInt!
  totalSupply: BigInt!
}

type Geyser @entity {
  # geyser contract address
  id: ID!

  # geyser config
  stakingToken: Token!
  rewardToken: Token!

  bonusMin: BigInt!
  bonusMax: BigInt!
  bonusPeriod: BigInt!

  createdTimestamp: BigInt!
  createdBlock: BigInt!

  # stats
  users: BigInt!
  operations: BigInt!

  staked: BigDecimal!
  rewards: BigDecimal!
  funded: BigDecimal!
  distributed: BigDecimal!
  gysrSpent: BigDecimal!

  stakedUSD: BigDecimal!
  rewardsUSD: BigDecimal!
  tvl: BigDecimal!
  apy: BigDecimal!
  sharesPerToken: BigDecimal!
}

type User @entity {
  # user address
  id: ID!

  # global stats
  operations: BigInt!
  earned: BigDecimal!

  # global positions
  positions: [Position!] @derivedFrom(field: "user")
}

type Position @entity {
  # geyser address, user address
  id: ID!

  user: User!
  geyser: Geyser!

  shares: BigDecimal!
  stakes: [Stake!] @derivedFrom(field: "position")
}

type Stake @entity {
  # geyser address, user address, timestamp
  id: ID!

  position: Position!
  user: User!
  geyser: Geyser!

  shares: BigDecimal!
  timestamp: BigInt!
}
